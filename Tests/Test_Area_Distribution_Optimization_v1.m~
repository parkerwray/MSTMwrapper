


%{
    Find optimal weights for making spectral filter out of particles.
%}




ff = 0.2;
Escat = [1,2,3,4;5,6,7,8];
Escat0 = Escat;
Escat180 = Escat;


R = @(w)get_Rnorm(w,ff,Escat, Escat0, Escat180);

w0 = [0.1, 0.2, 0.3, 0.4];
lb = zeros(size(w0));
ub = ones(size(w0));

[cineq, ceq] = PMF_constraints(w)







function [cineq, ceq] = PMF_constraints(w)
    
    c_inequality = [];
    c_equality = sum(w)-1;

end


function R = get_Rnorm(w,ff,Escat, Escat0, Escat180)

    sca = w*(Escat.');
    sca0 = w*(Escat0.');
    sca180 = w*(Escat180.');
    
    R = (ff.*sca)./(1+(sca0./sca180));
    R = norm(R).^2;
end


















































